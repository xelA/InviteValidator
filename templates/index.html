{% extends "_layout.html" %}
{% block content %}
<style>
  .permission-container {
    display: flex;
    flex-direction: row;
  }

  .invite-container {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  #permissions {
    margin-right: .5em;
    margin-bottom: .1em;
  }
</style>

<section class="me unset">
  <div class="avatar-container">
    <img src="https://avatars.githubusercontent.com/u/37005026?s=200&v=4" class="image-title">
  </div>
  <div class="unset">
    <h1 class="title">Invite xelA</h1>
  </div>
</section>

<div class="box-container no-margin">
  <p class="small-box">
    <h2 class="no-margin">Before attempting to invite the bot...</h2>
    Make sure that you have already requested for whitelist so you don't start scratching your head
    when you see that you are not allowed to invite xelA. Thank you ðŸ’–
  </p>

  <div class="box-container primary-bg no-margin">
    <div class="permission-container">
      <input type="checkbox" id="permissions" name="permissions">
      <label for="permissions" class="no-margin">Enable bot role</label>
    </div>
    <i class="greyple-text">To remove the role later, you need to whitelist the bot again to update oauth.</i>
  </div>

</div>

<div class="box-container">
  <div class="buttons">
    <a href="{{ oauth_url | safe }}" id="invite" class="btn emerald-bg black-text">Invite bot</a>
  </div>
</div>

<script>
  const permissions = document.getElementById("permissions")
  const invite = document.getElementById("invite")

  permissions.addEventListener("change", () => {
    if (permissions.checked) {
      invite.href = "{{ oauth_url | safe }}&permissions={{ permissions }}"
      invite.innerText = "Invite bot with bot role"
      invite.style.backgroundColor = "#f1c40f"
    } else {
      invite.href = "{{ oauth_url | safe }}"
      invite.innerText = "Invite bot"
      invite.style.backgroundColor = "#2ecc71"
    }
  });
</script>
{% endblock %}
